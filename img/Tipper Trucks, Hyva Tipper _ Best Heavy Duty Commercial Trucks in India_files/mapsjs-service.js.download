
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.23.0/HERE_NOTICE
 */

H.util.eval("R.prototype.O=ca(3,function(a){var b=this.getCache(),c=this;if(a!==y){C(a,Ek,R.prototype.O,0);var d=a}else d=il;d!==b&&b.ra(function(e,f,g){return c.fc(e)?(d.add(e,f,g),!0):!1});this.T=d});Sh.prototype.b=ca(2,function(a){this.i=a;a=this.getState();a!==Ph.INIT&&a!==Ph.LOADING&&$h(this)});function mp(a,b){Wa.apply(null,arguments);return a}\nfunction np(a,b){b=void 0===b?{}:b;if(!a.ik)throw new Yc(a);np.l.constructor.call(this);var c=op(this,b);if(!c.baseUrl&&!c.platformBaseUrl)throw new D(a,0,'either \"baseUrl\" or \"platformBaseUrl\" must be specified');this.c=(c.baseUrl?c.baseUrl:c.platformBaseUrl).clone();a=c.baseUrl?b:c;a.host&&this.c.Ig(a.host);a.subDomain&&this.c.Ra(a.subDomain);a.path&&this.c.qe(a.path);pp(this.c);this.bf=c.headers||{}}u(np,F);t(\"H.service.Service\",np);function op(a,b){a=a.a();return b?mp({},a,b):a}\nnp.prototype.a=function(){return{}};np.prototype.D=function(){return this.c};np.prototype.getUrl=np.prototype.D;np.prototype.F=function(a,b,c,d){d=new rf(void 0===d?\"application/json\":d,a.toString(),fe,{headers:this.bf});d.then(b,qp(this,a,c));return d};function qp(a,b,c){return function(d){return\"function\"!==typeof d.json?Promise.reject(c(rp(b,d))):d.json().then(function(e){return c(a.b(e))},function(){return c(rp(b,d))})}}np.prototype.b=function(a){return Error(a.message)};\nfunction rp(a,b){return Error((b.statusText?\"[\"+b.statusText+\"] \":\"\")+a+\" request failed\")};function X(a,b,c,d,e,f){if(a&&b)this.ol(a),this.Ig(b),this.qe(c),this.nl(e),this.cl(f),this.Oi(d);else throw Error('Parameters \"scheme\" and \"host\" must be specified');}t(\"H.service.Url\",X);\nfunction sp(a,b){var c=x.document,d,e=c&&c.createElement(\"a\"),f=\"\";if(c){if(b){var g=(d=c.getElementsByTagName(\"base\")[0])&&d.href;var h=c.head;var k=d||h.appendChild(c.createElement(\"base\"));k.href=b}e.href=a;f=e.href;b&&(d?d.href=g:h.removeChild(k))}else/[\\w]+:\\/\\//.test(a)&&(f=a);g=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(f);a=g[1];k=g[4];b=g[5];h=g[6];c=g[7];d=g[8];!g[2]&&k&&/@/.test(k)&&(k=k.split(\"@\")[1]);g=k;h=h&&0<h.length?h.substr(1):\n\"\";k={};if(c)for(e=/([?&]?([^=&+]+))(=([^&]+))?/g;f=e.exec(c);)k[decodeURIComponent(f[2])]=f[4]?decodeURIComponent(f[4]):void 0;return new X(a,g,h,k,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):\"\")}X.parse=sp;var tp=0;X.prototype.clone=function(){tp++;var a={},b;for(b in this.a)a[b]=this.a[b];return new X(this.s,this.f,this.c,a,this.g,this.b)};X.prototype.clone=X.prototype.clone;\nX.prototype.ol=function(a){if(!a||\"string\"!==typeof a)throw Error('The \"scheme\" parameter must be a non-empty string.');this.s=a;return this};X.prototype.setScheme=X.prototype.ol;X.prototype.tn=function(){return this.s};X.prototype.getScheme=X.prototype.tn;X.prototype.Ig=function(a){if(!a||\"string\"!==typeof a||\"-\"===a.charAt(0)||\".\"===a.charAt(0)||\".\"===a.charAt(a.length-1))throw Error('The \"host\" parameter is not a valid host name.');this.f=a;return this};X.prototype.setHost=X.prototype.Ig;\nX.prototype.Mm=function(){return this.f};X.prototype.getHost=X.prototype.Mm;X.prototype.qe=function(a){this.c=a||void 0;return this};X.prototype.setPath=X.prototype.qe;X.prototype.fn=function(){return this.c};X.prototype.getPath=X.prototype.fn;X.prototype.Oi=function(a){if(a)if(\"object\"==typeof a)this.a=a;else throw Error('Parameter \"params\" must be an object.');else this.a={};return this};X.prototype.setQuery=X.prototype.Oi;X.prototype.ck=function(){return!up(this)};X.prototype.hasQuery=X.prototype.ck;\nX.prototype.getQuery=function(){return this.a};X.prototype.getQuery=X.prototype.getQuery;X.prototype.nl=function(a){if(a&&isNaN(parseInt(a,10)))throw Error('Parameter \"port\" must be a number or undefined');this.g=+a||void 0;return this};X.prototype.setPort=X.prototype.nl;X.prototype.kn=function(){return this.g};X.prototype.getPort=X.prototype.kn;X.prototype.cl=function(a){this.b=a||void 0;return this};X.prototype.setAnchor=X.prototype.cl;X.prototype.rd=function(){return this.b};\nX.prototype.getAnchor=X.prototype.rd;X.prototype.K=function(a){if(\"object\"!==typeof a)throw Error('Parameter \"other\" must be an object.');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&\"function\"!==typeof a[c]&&(b[c]=a[c]);return this};X.prototype.mergeQuery=X.prototype.K;X.prototype.Ra=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subDomain\" must be a non-empty string');\".\"===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.Ig(a+\".\"+this.f)};\nX.prototype.addSubDomain=X.prototype.Ra;X.prototype.G=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subPath\" must be a non-empty string');return this.qe((this.c?this.c+\"/\":\"\")+a)};X.prototype.addSubPath=X.prototype.G;X.prototype.toString=function(){return[this.s+\"://\",this.f,this.g?\":\"+this.g:\"\",this.c||!up(this)||this.b?\"/\":\"\",this.c?encodeURI(this.c):\"\",vp(this),this.b?\"#\"+encodeURIComponent(this.b):\"\"].join(\"\")};X.prototype.toString=X.prototype.toString;\nfunction vp(a){var b=[],c,d=a.a,e;for(c in d)if(d.hasOwnProperty(c)&&\"function\"!==typeof d[c]){var f=a.a[c];if(C(f,wp)){var g=0;var h=f.Cl;for(e=h.length;g<e;)b.push(encodeURIComponent(c)+(void 0===f?\"\":\"=\"+encodeURIComponent(h[g]))),g++}else b.push(encodeURIComponent(c)+(void 0===f?\"\":\"=\"+encodeURIComponent(f)))}return 0<b.length?\"?\"+b.join(\"&\"):\"\"}function pp(a){var b=Ef(\"H-service\",\"1.23.0\",\"165e5dd\");a.a.xnlp=\"CL_JSMv3.\"+b.version;return a}\nfunction up(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&\"function\"!==typeof a.a[b]&&(c++,0<c))break;return!c}function wp(a){var b;if(!yc(a))throw new D(wp,0,a);for(b=0;b<a.length;b++){var c=a[b];if(!zc(c)&&!Cc(c))throw new D(wp,0,\"The array can only contain strings and numbers\");}this.Cl=a}X.MultiValueQueryParameter=wp;wp.prototype.Dn=function(){return this.Cl};wp.prototype.getValues=wp.prototype.Dn;function Y(a){a=mp({},this.b,a);var b=a.apikey||a.apiKey,c=a.baseUrl;if(c=b?c?0:\"baseUrl\":\"apikey\")throw new D(Y,0,'\"'+c+'\" must be specified');this.fl(a.baseUrl);this.a=b;this.c.K({apikey:b});this.f=a.headers||{};this.g=Ua(a.servicesConfig||{})}t(\"H.service.Platform\",Y);Y.prototype.b={apikey:null,baseUrl:new X(\"https\",\"hereapi.com\")};Y.prototype.fl=function(a){this.c=pp(a.clone());this.a=a=this.a;this.c.K({apikey:a})};Y.prototype.setBaseUrl=Y.prototype.fl;Y.prototype.gc=function(){return this.c};\nY.prototype.getBaseUrl=Y.prototype.gc;Y.prototype.Ya=function(a,b){try{return a.ik=!0,new a(mp({platformBaseUrl:this.gc(),headers:this.f},this.g[a.CONFIG_KEY]||{},b||{}))}finally{delete a.ik}};Y.prototype.createService=Y.prototype.Ya;var xp=Function(\"return this\")();rc(\"monospace serif\");function yp(){}yp.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||xp.document.createElement(\"canvas\")};yp.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var zp=new yp;t(\"H.service.util.eval\",function(a){return eval(a)});function Ap(){var a=decodeURIComponent(x.H.getScriptPath());a=a?\"/\"===a[a.length-1]?a.substring(0,a.length-1):a:\"https://js.api.here.com/v3/3.1.23.0\";return sp(a).G(\"styles\")};function Bp(a,b,c){var d=this;c=c||{};var e=+c.min,f=+c.max;c.tileSize=c.tileSize||512;c.min=e?Yd(e,1,17):1;c.min+=Ck(c.tileSize,1);c.max=f?Yd(f,1,17):17;Bp.l.constructor.call(this,c);C(a,Cp,Bp,0);C(b,Oh,Bp,1);this.o=a;b.b&&b.b(\"OMV\");this.Sc(b,!0);this.s=function(){Dp(d);d.reload(!1)};a.addEventListener(\"versionupdate\",this.s);Dp(this);Bp.prototype.I=function(){var g=/^v2\\/vectortiles\\/(.+)\\/mc$/.exec(a.D().c);return g?g[1]:B+\"\"}()}u(Bp,R);t(\"H.service.omv.Provider\",Bp);\nfunction Dp(a){var b=a.wd(\"_#-;,:\",\"_#-;,:\",\"_#-;,:\");a.v=new RegExp(\"^\"+b.replace(/[.*+?^${}()|[\\]\\\\\\/]/g,\"\\\\$&\").replace(/_#-;,:/g,\"\\\\d+\")+\"$\")}Bp.prototype.fc=function(a){return this.v.test(a)};Bp.prototype.cacheFilter=Bp.prototype.fc;Bp.prototype.wd=function(a,b,c){return Ep(this.o,a,b,c).toString()};Bp.prototype.getTileKey=Bp.prototype.wd;Bp.prototype.Pb=function(){return this.N};Bp.prototype.getCache=Bp.prototype.Pb;Bp.prototype.MAX_STORE_TIME=2592E6;Bp.prototype.fh=function(){return md()};\nBp.prototype.be=function(){return md()?ld():Bp.l.be.call(this)};Bp.prototype.F=function(a,b,c,d,e){return this.o.ib(a,b,c,d,e)};Bp.prototype.requestInternal=Bp.prototype.F;Bp.prototype.rc=function(a){a.b&&a.b(\"OMV\");this.Sc(a)};Bp.prototype.setStyle=Bp.prototype.rc;Bp.prototype.ta=function(){return Bp.l.ub.apply(this)};Bp.prototype.getStyle=Bp.prototype.ta;\nBp.prototype.ub=function(){var a=Bp.l.ub.apply(this),b;this.C&&(a.getState()===Ph.READY?(b=a.sd())&&b.global&&(this.c&&(b.global.ux_language=this.c),this.a&&(b.global.ux_language_fallback=this.a),a=new Sh(b,a.gc())):a.load());return a};function Fp(a,b,c){var d=a.ub().getState()===Ph.READY,e=zc(b),f=zc(c);e&&(a.c=b);f&&(a.a=c);if(e||f)a.C=!0,d&&a.f()}Bp.prototype.u=function(){Bp.l.u.call(this);this.o.removeEventListener(\"versionupdate\",this.s)};Bp.prototype.N=new Ek(256);\nBp.prototype.sa=function(a,b){return Gp(this.o.sa(),this.I,b,a)};Bp.prototype.getCopyrights=Bp.prototype.sa;function Cp(a){Cp.l.constructor.call(this,Cp,a);a=op(this,a).mapVersion;this.Ze=tc(a)?a:Hp[this.D().toString()];tc(this.Ze)||Ip(this)}u(Cp,np);t(\"H.service.omv.Service\",Cp);Cp.prototype.a=function(){return{subDomain:\"vector\",path:\"v2/vectortiles/base/mc\"}};Cp.CONFIG_KEY=\"omv\";var Hp={};Fc(Hp);Cp.prototype.Xm=function(){return this.Ze};Cp.prototype.getMapVersion=Cp.prototype.Xm;\nfunction Ip(a){a.F(a.D().clone().G(\"../../info\"),function(b){b=b.mapVersion;var c=a.D().toString();a.Ze=b;b!==Hp[c]&&(Hp[c]=b,a.dispatchEvent(\"versionupdate\"))},function(){})}Cp.prototype.od=function(a,b){return new ml(new Bp(this,a,b),{max:22})};Cp.prototype.createLayer=Cp.prototype.od;Cp.prototype.ib=function(a,b,c,d,e){return this.F(Ep(this,a,b,c),function(f){return f.arrayBuffer().then(d,e)},e,\"arraybuffer\")};\nfunction Ep(a,b,c,d){b=a.D().clone().G(d+\"/\"+b+\"/\"+c+\"/omv\");tc(a.Ze)&&b.K({mv:a.Ze});return b}Cp.prototype.gg=function(a){return Ap().G(\"omv/\"+a+\".yaml\")};Cp.prototype.Dh=function(a,b){if(!Ca(a))throw new D(this.Dh,0,'\"onResult\" must be a function');if(!Ca(b))throw new D(this.Dh,1,'\"onError\" must be a function');return this.F(this.D().clone().qe(\"v2/vectortiles/pviews\"),a,b)};Cp.prototype.getPoliticalViews=Cp.prototype.Dh;Y.prototype.Uj=function(a){return this.Ya(Cp,a)};\nY.prototype.getOMVService=Y.prototype.Uj;Cp.prototype.Le=function(){this.Zc=new Jp;this.F(this.D().clone().G(\"../../copyrights\"),A(this.Zi,this),id)};Cp.prototype.Zi=function(a){Lp(this.Zc,a);this.dispatchEvent(\"copyrightupdate\")};Cp.prototype.sa=function(){this.Zc||this.Le();return this.Zc};Cp.prototype.getCopyrights=Cp.prototype.sa;function Jp(){this.a={}}function Lp(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d,e=b[c],f=a.a[c]||(a.a[c]=[]),g=e.length;for(d=0;d<g;d++)f.push(new Mp(e[d]))}}function Gp(a,b,c,d){var e=(a=a.a[b])?a.length:0,f=[];for(b=0;b<e;b++)a[b].yd(c,d)&&f.push(a[b]);return f}\nfunction Mp(a){var b,c=a.boxes;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.b=[];if(c&&(b=c.length)){var d=c[0];var e=new K(d[0],d[1],d[2],d[3]);this.b.push(e);this.a=new K(d[0],d[1],d[2],d[3]);for(a=1;a<b;a++)d=c[a],e=new K(d[0],d[1],d[2],d[3]),this.b.push(e),this.a.nc(e,!1,this.a)}}Mp.prototype.yd=function(a,b){if(a>=this.min&&a<=this.max)if((a=this.b.length)&&this.a){if(this.a.yd(b))for(;a--;)if(this.b[a].yd(b))return!0}else return!0;return!1};function Np(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.D().clone().G(b+\"/\"+a.Dc()+\"/\"+c).K(f),l=a.Gh();this.I=a;this.W=k;tk.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(m,q,p){var r=h.W.clone();l&&r.Ra(l[(p+q+m)%l.length]);r.G(p+\"/\"+m+\"/\"+q+\"/\"+d+\"/\"+e);return r.toString()},crossOrigin:g.crossOrigin,headers:g.headers,uri:k.toString().replace(/_/g,\"\")+d});this.jb=b;this.s=c;this.a=f;this.yb=c.split(\".\")[0];this.pg=A(this.pg,this);this.getCopyrights=this.sa;a.addEventListener(\"versionupdate\",\nthis.pg)}u(Np,tk);Np.prototype.MAX_STORE_TIME=2592E6;n=Np.prototype;n.u=function(){tk.prototype.u.call(this);this.I.removeEventListener(\"versionupdate\",this.pg)};n.sa=function(a,b){return Gp(this.I.sa(),this.yb,b,a)};n.pg=function(){var a=this.I;this.W=a.D().clone().G(this.jb+\"/\"+a.Dc()+\"/\"+this.s).K(this.a);this.reload(!1)};n.fh=function(){return md()};n.be=function(){return md()?ld():Np.l.be.call(this)};function Op(a){Op.l.constructor.call(this,Op,a);a=op(this,a);this.ac=a.shards;(this.Pa=a.ignoreTypes?null:a.type)&&this.D().Ra(this.Pa);this.bc=a.version;this.Zc=new Jp;this.xi={};this.Qf=0;\"newest\"===this.bc&&this.qh()}u(Op,np);t(\"H.service.MapTileService\",Op);Op.prototype.a=function(){return{subDomain:\"maps.ls\",path:\"maptile/2.1\",type:\"base\",version:\"newest\",shards:[\"1\",\"2\",\"3\",\"4\"]}};Op.CONFIG_KEY=\"maptile\";\nfunction Pp(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}Op.prototype.Gh=function(){return this.ac};Op.prototype.Yj=function(){return this.Pa};Op.prototype.getType=Op.prototype.Yj;Op.prototype.Dc=function(){return this.bc};Op.prototype.getVersion=Op.prototype.Dc;Op.prototype.Si=function(a){this.bc=a};Op.prototype.sa=function(){this.Qf||(this.bc&&\"newest\"!==this.bc||\"traffic\"===this.Pa)&&this.Le();return this.Zc};Op.prototype.getCopyrights=Op.prototype.sa;n=Op.prototype;\nn.$i=function(a){a=a.response;var b;Pp(a,\"map\");Pp(a,\"scheme\");Pp(a,\"tiletype\");Pp(a,\"format\");Pp(a,\"resolution\");Pp(a,\"language\");if(\"newest\"===this.bc&&\"traffic\"!==this.Pa)for(b in a.maps)a.maps[b].hash&&a.maps[b].newest&&(this.Si(a.maps[b].hash),this.dispatchEvent(\"versionupdate\"));this.Mh=a;this.dispatchEvent(\"infoupdate\")};n.Zi=function(a){Lp(this.Zc,a);this.dispatchEvent(\"copyrightupdate\")};\nn.qh=function(){var a=this;var b=this.D().clone().G(\"info\").K({output:\"json\"});this.ac&&b.Ra(this.ac[0]);this.F(b,function(c){a.$i(c)},function(c){throw c;})};n.Le=function(){var a=this;var b=this.D().clone().G(\"copyright\").G(a.Dc()).K({output:\"json\"});this.ac&&b.Ra(this.ac[0]);this.Qf=1;this.F(b,function(c){a.Qf=2;a.Zi(c)},function(c){a.Qf=-1;throw c;})};n.yh=function(){return this.Mh};Op.prototype.getInfo=Op.prototype.yh;\nOp.prototype.Ge=function(a,b,c,d,e,f){var g=this.D().clone().G(a+\"/\"+this.Dc()+\"/\"+b+\"/\"+c+\"/\"+d).K(e?e:{}).toString();var h=0,k,l=g.length;if(0!==l)for(k=0;k<l;k++){var m=g.charCodeAt(k);h=(h<<5)-h+m;h|=0}g=h;h=this.xi[g];h||(h=new Np(this,a,b,c,d,e,mp({headers:this.bf},f||{})),this.xi[g]=h);return h};Op.prototype.createTileProvider=Op.prototype.Ge;Op.prototype.wc=function(a,b,c,d,e,f,g,h){a=this.Ge(a,b,c,d,e,h);return new ml(a,{opacity:f,dark:!!g})};Op.prototype.createTileLayer=Op.prototype.wc;\nY.prototype.Bh=function(a){return this.Ya(Op,a)};Y.prototype.getMapTileService=Y.prototype.Bh;Y.prototype.jh=function(a,b,c,d,e,f){var g=this.Bh(),h=this.Bh({type:\"aerial\"}),k=this.Xj(),l=this.Uj(),m={},q={crossOrigin:\"anonymous\"};Da(a)&&(f=a,\"crossOrigin\"in f&&(q.crossOrigin=f.crossOrigin),a=f.tileSize,b=f.ppi,c=f.lg,d=f.lg2,e=f.style,f=f.pois);var p=a||512;if(0>[72,250,320,500].indexOf(+b)){if(b!==B)throw new D(this.jh,1,b);}else m.ppi=+b;c&&(m.lg=c);d&&(m.lg2=d);e&&(m.style=e);f&&(m.pois=f);a=function(r,v,w,z,J){return r.wc(v,w,p,z,m,1,J,q)};b=l.od(new Sh(l.gg(\"miami/normal.day\").toString()));\nFp(b.pa(),m.lg,m.lg2);c=l.od(new Sh(l.gg(\"miami/truck.day\").toString()));Fp(c.pa(),m.lg,m.lg2);l=k.yj(m.lg?{lg:m.lg,i18n:!0}:void 0);return{vector:{normal:{map:b,truck:c,traffic:k.xj(),trafficincidents:l}},raster:{normal:{xbase:a(g,\"xbasetile\",\"normal.day\",\"png8\",!1),xbasenight:a(g,\"xbasetile\",\"normal.night\",\"png8\",!0),base:a(g,\"basetile\",\"normal.day\",\"png8\",!1),basenight:a(g,\"basetile\",\"normal.night\",\"png8\",!0),map:a(g,\"maptile\",\"normal.day\",\"png8\",!1),mapnight:a(g,\"maptile\",\"normal.night\",\"png8\",\n!0),trafficincidents:l,transit:a(g,\"maptile\",\"normal.day.transit\",\"png8\",!1),labels:a(g,\"labeltile\",\"normal.day\",\"png\",!1)},satellite:{xbase:a(h,\"xbasetile\",\"hybrid.day\",\"jpg\",!0),base:a(h,\"basetile\",\"hybrid.day\",\"jpg\",!0),map:a(h,\"maptile\",\"hybrid.day\",\"jpg\",!0),labels:a(h,\"labeltile\",\"hybrid.day\",\"png\",!0)},terrain:{xbase:a(h,\"xbasetile\",\"terrain.day\",\"jpg\",!1),base:a(h,\"basetile\",\"terrain.day\",\"jpg\",!1),map:a(h,\"maptile\",\"terrain.day\",\"jpg\",!1),labels:a(h,\"labeltile\",\"terrain.day\",\"png\",!1)}}}};\nY.prototype.createDefaultLayers=Y.prototype.jh;function Qp(){this.a={}}Qp.prototype.Cb=function(a,b){var c=a+b,d;if(d=this.a[c])return d;a=Rp.MARKER.replace(\"{{icon}}\",Sp[a]||Sp.OTHER);a=a.replace(\"{{color}}\",Tp[b]||Tp.BLOCKING);b={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Ki(Li.POLYGON,Up.MARKER)};return this.a[c]=d=new Hj(a,b)};\nvar Rp={MARKER:'<svg width=\"26\" height=\"33\" enable-background=\"new 0 0 26 33\" viewBox=\"0 0 26 33\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m26 33h-26v-33h26z\" fill=\"#8c8c8c\" opacity=\"0\"/><path d=\"m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026\" fill=\"#878787\" opacity=\".6\"/><path d=\"m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z\" fill=\"{{color}}\"/>{{icon}}</svg>'},Sp=\n{CONGESTION:'<path style=\"fill:#FFFFFF;\" d=\"M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z\"/>',\nROADWORKS:'<path d=\"m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z\" fill=\"#fff\"/>',\nACCIDENT:'<path style=\"fill:#FFFFFF;\" d=\"M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z\"/>',\nOTHER:'<path style=\"fill:#FFFFFF;\" d=\"M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z\"/>'},\nTp={BLOCKING:\"#323232\",VERYHIGH:\"#d5232f\",HIGH:\"#ffa100\"},Up={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function Vp(a,b,c){c=c?c:{};c.criticality||(c.criticality=\"major,critical\");C(a,Wp,Vp,0);nn.call(this,{max:20,min:8,requestData:A(this.W,this)});this.s=new Qp;this.C=a;this.a=c;this.reload=A(this.reload,this);this.v=setInterval(this.reload,b||18E4)}u(Vp,nn);t(\"H.service.traffic.incidents.Provider\",Vp);Vp.prototype.c={minor:\"HIGH\",\"low impact\":\"HIGH\",major:\"VERYHIGH\",critical:\"BLOCKING\"};\nVp.prototype.W=function(a,b,c,d,e){var f=this,g=this.c,h=this.s;return this.C.requestIncidentsByTile(a,b,c,function(k){var l=[];k=k.TRAFFIC_ITEMS;var m;if(k)for(k=k.TRAFFIC_ITEM,m=k.length;m--;){var q=k[m];var p=q.TRAFFIC_ITEM_TYPE_DESC;switch(p){case \"ACCIDENT\":case \"CONGESTION\":var r=p;break;case \"CONSTRUCTION\":r=\"ROADWORKS\";break;default:r=\"OTHER\"}r=h.Cb(r,g[q.CRITICALITY.DESCRIPTION]);p=q.LOCATION.GEOLOC.ORIGIN;p=new ln({lat:p.LATITUDE,lng:p.LONGITUDE},{provider:f,icon:r});p.setData(q);l.push(p)}d(l)},\ne,this.a)};Vp.prototype.B=function(){nn.prototype.B.call(this);clearInterval(this.v)};var Xp=\"A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A\".split(\" \");function Yp(a,b){var c={};this.a=a;Wa(c,b||c);bk.call(this,c);this.Cg={};a=this.Qb(Pg.SPATIAL);a.update(a.a+1,Mg.ADD)}u(Yp,bk);t(\"H.service.remote.ObjectProvider\",Yp);Yp.prototype.B=function(){bk.prototype.B.call(this)};Yp.prototype.Mc=function(){return ff};Yp.prototype.requestMarkers=Yp.prototype.Mc;Yp.prototype.Lc=function(){return ff};Yp.prototype.requestDomMarkers=Yp.prototype.Lc;Yp.prototype.Ed=function(){return ff};Yp.prototype.requestOverlays=Yp.prototype.Ed;Yp.prototype.Wb=df;\nYp.prototype.providesMarkers=Yp.prototype.Wb;Yp.prototype.Vb=df;Yp.prototype.providesDomMarkers=Yp.prototype.Vb;Yp.prototype.Kc=df;Yp.prototype.providesSpatials=Yp.prototype.Kc;Yp.prototype.Dg=function(){return ff};Yp.prototype.requestSpatials=Yp.prototype.Dg;function Zp(a){return a.Ec(!0)}Yp.prototype.Eg=function(a,b){a=$p(this,a,aq);b&&(a=a.filter(Zp));return a};Yp.prototype.requestSpatialsByTile=Yp.prototype.Eg;\nfunction $p(a,b,c){var d=b.j&&b.j[c],e;!d&&(e=b.m)&&(delete b.m,(b.j=a=a.a.parse(a,b,e))&&(d=a[c]));return d||ff}Yp.prototype.ea=function(a){var b=a.fb();if(this.Cg[b])throw new Yc(this.ea,\"Remote object \"+b+\" already added\");return this.Cg[b]=a};Yp.prototype.Ia=function(a){delete this.Cg[a.fb()]};var aq=\"spatials\";function bq(a,b,c){bq.l.constructor.call(this,{min:cq,max:dq});C(a,Wp,bq,0);this.s=a;this.a=c||eq;this.a.responseattributes=\"sh,fc\";this.c=setInterval(A(this.reload,this),b||18E4);this.Sc(new Sh(a.gg().toString()),!0)}u(bq,R);t(\"H.service.traffic.flow.Provider\",bq);bq.prototype.ta=function(){return this.ub()};bq.prototype.getStyle=bq.prototype.ta;bq.prototype.rc=function(a){a.b&&a.b(\"GeoJSONTileSource\");this.Sc(a)};bq.prototype.setStyle=bq.prototype.rc;var eq={locationreferences:\"tmc,shp\"};\nbq.prototype.u=function(){bq.l.u.call(this);clearInterval(this.c)};bq.prototype.F=function(a,b,c,d,e){return this.s.requestFlowByTile(a,b,c,function(f){f.type&&-1!==f.type.indexOf(\"Error\")?e(f.Details):d(f)},e,this.a)};bq.prototype.requestInternal=bq.prototype.F;\nbq.prototype.pd=function(a,b,c,d,e){var f,g,h,k,l={type:\"FeatureCollection\",features:[]},m;var q=d.RWS.length;for(f=0;f<q;f++){var p=d.RWS[f];var r=p.RW;var v=r.length;var w=-1!==Xp.indexOf(p.EXTENDED_COUNTRY_CODE+p.EBU_COUNTRY_CODE);for(p=0;p<v;p++){var z=r[p].FIS;var J=z.length;for(z=0;z<J;z++){var G=r[p].FIS[z].FI;var W=G.length;for(g=0;g<W;g++){var V=G[g];var va=[];var ea=V.CF[0];var dc=!!ea.SSS;var tb={type:\"Feature\",properties:ea,geometry:{type:\"MultiLineString\",coordinates:va}};tb.properties.LHT=\nw;V.SHP.length&&(tb.properties.FC=V.SHP[0].FC);dc&&(m=[]);for(ea=0;ea<V.SHP.length;ea++){var gd=V.SHP[ea].value;var wi=gd.length;for(h=0;h<wi;h++){var Me=dc?m:void 0,Sb=new Nn(gd[h].trim()),Tf=[],Xc={};for(Sb.te();-1!==(k=Sb.Tb());)k===fq?(Xc.lat=+String.fromCharCode.apply(bq,Sb.Sd()),Sb.next(),Sb.te()):k===gq?(Xc.lng=+String.fromCharCode.apply(bq,Sb.Sd()),Tf.push([Xc.lng,Xc.lat]),Me&&Me.push(Zf(Xc)),Xc=[],Sb.next(),Sb.te()):Sb.next();Xc.lng=+String.fromCharCode.apply(bq,Sb.Sd());Tf.push([Xc.lng,\nXc.lat]);Me&&Me.push(Zf(Xc));k=Tf;va.push(k)}}l.features.push(tb)}}}}return bq.l.pd.call(this,a,b,c,l,e)};bq.prototype.createTileInternal=bq.prototype.pd;var dq=21,cq=10,gq=32,fq=44;function hq(a){function b(m){d.contains(e)&&d.removeChild(e);l&&clearTimeout(l);delete hq.a[f];m&&a.Jj&&a.Jj.call(k,m)}if(!a.url||!a.eh)throw Error('Parameter \"options\" must specify at least a URL and a callback.');if(\"function\"!==typeof a.eh)throw Error(\"Parameters options.callback must be a function\");var c=a.mp||document;var d=c.getElementsByTagName(\"head\")[0];var e=c.createElement(\"script\");c=a.url instanceof X?a.url:sp(a.url,a.lp);var f=hq.b++;var g=a.Vl||\"callback\";var h=a.eh;var k={};var l=\nnull;k.id=f;k.cancel=function(){b(\"cancelled\")};0!==a.timeout&&(l=x.setTimeout(function(){b(\"timeout\")},a.timeout||3E4));hq.a[f]=function(m){b();h.call(k,m)};e.type=\"text/javascript\";e.src=c.toString()+(c.ck()?\"&\":\"?\")+g+\"=\"+(a.np?\"H.service.jsonp.handleResponse(\"+f+\")\":encodeURI(\"H.service.jsonp.handleResponse(\"+f+\")\"));d.appendChild(e);return k}t(\"H.service.jsonp\",hq);hq.Jn=function(a){return(a=hq.a[a])?a:function(){}};hq.handleResponse=hq.Jn;hq.b=0;hq.a={};function Wp(a){Wp.l.constructor.call(this,Wp,a);this.Wl=op(this,a).callbackKey}u(Wp,np);t(\"H.service.traffic.Service\",Wp);Wp.prototype.a=function(){return{subDomain:\"traffic.ls\",path:\"traffic/6.1\",callbackKey:\"jsoncallback\"}};Wp.CONFIG_KEY=\"traffic\";Wp.prototype.xj=function(a){return new ml(new bq(this,void 0,a),{max:22})};Wp.prototype.createFlowLayer=Wp.prototype.xj;Wp.prototype.yj=function(a){return new on(new Vp(this,void 0,a))};Wp.prototype.createIncidentsLayer=Wp.prototype.yj;\nfunction iq(a,b,c,d){return hq({url:b,eh:c,Jj:function(e){d(Error(\"[\"+e+\"] \"+b+\" request failed\"))},Vl:a.Wl})}Wp.prototype.Io=function(a,b,c){a=this.D().clone().G(\"incidents.json\").K(a);return iq(this,a,b,c)};Wp.prototype.requestIncidents=Wp.prototype.Io;Wp.prototype.Ho=function(a,b,c,d,e,f){a=this.D().clone().G([\"flow/json\",c,a,b].join(\"/\")).K(f||{});return iq(this,a,d,e)};Wp.prototype.requestFlowByTile=Wp.prototype.Ho;\nWp.prototype.Jo=function(a,b,c,d,e,f){a=this.D().clone().G([\"incidents/json\",c,a,b].join(\"/\")).K(f||{});return iq(this,a,d,e)};Wp.prototype.requestIncidentsByTile=Wp.prototype.Jo;Wp.prototype.gg=function(){return Ap().G(\"traffic/flow.yaml\")};Y.prototype.Xj=function(a){return this.Ya(Wp,a)};Y.prototype.getTrafficService=Y.prototype.Xj;function jq(a){jq.l.constructor.call(this,jq,a);this.al=op(this,a).reverseSubDomain}u(jq,np);t(\"H.service.GeocodingService\",jq);jq.prototype.a=function(){return{subDomain:\"geocoder.ls\",reverseSubDomain:\"reverse\",path:\"6.2\"}};jq.CONFIG_KEY=\"geocoding\";jq.prototype.b=function(a){return Error(a.Details||a.message||a.error)};jq.prototype.sh=function(a,b,c){a=this.D().clone().G(\"geocode.json\").K(a);return this.F(a,b,c)};jq.prototype.geocode=jq.prototype.sh;\njq.prototype.Bi=function(a,b,c){a=this.D().clone().G(\"reversegeocode.json\").K(a);this.al&&a.Ra(this.al);return this.F(a,b,c)};jq.prototype.reverseGeocode=jq.prototype.Bi;jq.prototype.search=function(a,b,c){a=this.D().clone().G(\"search.json\").K(a);return this.F(a,b,c)};jq.prototype.search=jq.prototype.search;Y.prototype.Im=function(a){return this.Ya(jq,a)};Y.prototype.getGeocodingService=Y.prototype.Im;function kq(a){kq.l.constructor.call(this,kq,a)}u(kq,np);t(\"H.service.PlacesService\",kq);kq.prototype.a=function(){return{subDomain:\"places.ls\",path:\"places/v1\"}};kq.CONFIG_KEY=\"places\";kq.EntryPoint={SEARCH:\"discover/search\",SUGGEST:\"suggest\",EXPLORE:\"discover/explore\",AROUND:\"discover/around\",HERE:\"discover/here\",CATEGORIES:\"categories/places\"};kq.prototype.request=function(a,b,c,d){return this.va(a,b,c,d)};\nkq.prototype.va=function(a,b,c,d){a=this.D().clone().G(a).K(b||{});return this.F(a,c,d)};kq.prototype.search=function(a,b,c){return this.va(\"discover/search\",a,b,c)};kq.prototype.search=kq.prototype.search;kq.prototype.To=function(a,b,c){return this.va(\"suggest\",a,b,c)};kq.prototype.suggest=kq.prototype.To;kq.prototype.fm=function(a,b,c){return this.va(\"discover/explore\",a,b,c)};kq.prototype.explore=kq.prototype.fm;kq.prototype.Ql=function(a,b,c){return this.va(\"discover/around\",a,b,c)};\nkq.prototype.around=kq.prototype.Ql;kq.prototype.Ln=function(a,b,c){return this.va(\"discover/here\",a,b,c)};kq.prototype.here=kq.prototype.Ln;kq.prototype.Xl=function(a,b,c){return this.va(\"categories/places\",a,b,c)};kq.prototype.categories=kq.prototype.Xl;kq.prototype.hm=function(a,b,c,d){a=sp(a).K(this.D().getQuery()).K(d||{});return this.F(a,b,c)};kq.prototype.follow=kq.prototype.hm;Y.prototype.gn=function(a){return this.Ya(kq,a)};Y.prototype.getPlacesService=Y.prototype.gn;function lq(a){lq.l.constructor.call(this,lq,a)}u(lq,np);t(\"H.service.iml.Service\",lq);lq.prototype.a=function(){return{host:\"interactive.data.api.platform.here.com\",path:\"interactive/v1/catalogs\"}};lq.prototype.b=function(a){return Error(Da(a)?a.errorMessage:a)};lq.prototype.ud=function(a,b,c,d,e){mq(this.ud,0,a,b);nq(this.ud,2,c,d);a=this.D().clone().G(a+\"/layers/\"+b+\"/statistics\").K(e||{});return this.F(a,c,d)};lq.prototype.getStatistics=lq.prototype.ud;\nlq.prototype.ag=function(a,b,c,d,e,f,g,h,k){var l=k?\"\":\".mvtf\";a=this.D().clone().G(d+\"/layers/\"+e+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+l).K(Object.assign({clip:!0},h));return this.F(a,k?f:function(m){return m.arrayBuffer().then(f)},g,k?\"application/json\":\"arraybuffer\")};lq.prototype.getFeaturesByTile=lq.prototype.ag;\nlq.prototype.Zf=function(a,b,c,d,e,f){wc(a,\"String\",this.Zf,0,\"must be a string\");mq(this.Zf,1,b,c);nq(this.Zf,3,d,e);a=this.D().clone().G(b+\"/layers/\"+c+\"/features/\"+a).K(f||{});return this.F(a,d,e)};lq.prototype.getFeatureById=lq.prototype.Zf;\nlq.prototype.ic=function(a,b,c,d,e,f){if(!Array.isArray(a)||0===a.length||a.some(function(g){return\"string\"!==typeof g}))throw new D(this.ic,0,\"must be a non-empty array of strings\");mq(this.ic,1,b,c);nq(this.ic,3,d,e);a=this.D().clone().G(b+\"/layers/\"+c+\"/features\").K(Object.assign({},f,{id:new wp(a)}));return this.F(a,d,e)};lq.prototype.getFeaturesById=lq.prototype.ic;\nlq.prototype.dd=function(a,b,c,d,e){if(!Da(a)||!(a.bbox||a.north&&a.east&&a.south&&a.west))throw new D(this.dd,0,'must be an object with either \"bbox\" or a full set of \"north\", \"east\", \"south\" and \"west\"');mq(this.dd,1,b,c);nq(this.dd,3,d,e);a=this.D().clone().G(b+\"/layers/\"+c+\"/bbox\").K(a);return this.F(a,d,e)};lq.prototype.getFeaturesByBoundingBox=lq.prototype.dd;\nlq.prototype.$f=function(a,b,c,d,e){if(!(Da(a)&&a.radius&&(a.lat&&(a.lng||a.lon)||a.refCatalogHrn&&a.refLayerId&&a.refFeatureId)))throw new D(this.$f,0,'must be an object with \"radius\" and a combination of either \"lat\"+\"lng\" or \"refCatalogHrn\"+\"refLayerId\"+\"refFeatureId\"');mq(this.$f,1,b,c);nq(this.$f,3,d,e);a=this.D().clone().G(b+\"/layers/\"+c+\"/spatial\").K(a);return this.F(a,d,e)};lq.prototype.getFeaturesByPointAndRadius=lq.prototype.$f;\nlq.prototype.Se=function(a,b,c,d,e,f){if(!Da(a)||!a.radius)throw new D(this.Se,0,'must be an object with \"radius\"');if(!Da(b))throw new D(this.Se,1,\"must be a GeoJSON object\");mq(this.Se,2,c,d);nq(this.Se,4,e,f);a=this.D().clone().G(c+\"/layers/\"+d+\"/spatial\").K(a);b={method:\"POST\",data:JSON.stringify(b),headers:Object.assign({\"Content-Type\":\"application/geo+json\"},this.bf)};b=new rf(\"application/json\",a.toString(),fe,b);b.then(e,qp(this,a,f));return b};\nlq.prototype.getFeaturesByGeometryAndRadius=lq.prototype.Se;lq.prototype.Di=function(a,b,c,d,e){mq(this.Di,0,a,b);nq(this.Di,2,c,d);a=this.D().clone().G(a+\"/layers/\"+b+\"/search\").K(e||{});return this.F(a,c,d)};lq.prototype.searchFeatures=lq.prototype.Di;lq.prototype.Th=function(a,b,c,d,e){mq(this.Th,0,a,b);nq(this.Th,2,c,d);a=this.D().clone().G(a+\"/layers/\"+b+\"/iterate\").K(e||{});return this.F(a,c,d)};lq.prototype.iterateFeatures=lq.prototype.Th;lq.CONFIG_KEY=\"iml\";\nfunction mq(a,b,c,d){wc(c,\"String\",a,b,\"must be a string\");wc(d,\"String\",a,b+1,\"must be a string\")}function nq(a,b,c,d){if(!Ca(c))throw new D(a,b,\"must be a function\");if(!Ca(d))throw new D(a,b+1,\"must be a function\");}Y.prototype.Nm=function(a){return this.Ya(lq,a)};Y.prototype.getIMLService=Y.prototype.Nm;function oq(a,b,c,d){oq.l.constructor.call(this,d?{min:d.min,max:d.max}:void 0);C(a,lq,oq,0);if(!zc(b))throw new D(oq,1,'\"catalogHrn\" must be a string');if(!zc(c))throw new D(oq,2,'\"layerId\" must be a string');this.v=a;this.a=b;this.c=c;this.s=Da(d)&&Da(d.parameters)?d.parameters:{};this.Sc(new Sh({sources:{iml:{type:\"MVT\"}},layers:{iml:{data:{source:\"iml\",layer:this.a+\":\"+this.c},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,order:200,color:\"#92CF48\",size:[[10,\"8px\"],[14,\"12px\"],[18,\n\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#0258AE\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}))}u(oq,R);t(\"H.service.iml.Provider\",oq);oq.prototype.F=function(a,b,c,d,e){return this.v.ag(a,b,c,this.a,this.c,d,e,this.s)};oq.prototype.requestInternal=oq.prototype.F;oq.prototype.ta=function(){return this.ub()};oq.prototype.getStyle=oq.prototype.ta;\noq.prototype.rc=function(a){a.b(\"MVT\");this.Sc(a)};oq.prototype.setStyle=oq.prototype.rc;function pq(a){pq.l.constructor.call(this,pq,a)}u(pq,np);t(\"H.service.publicTransit.Service\",pq);pq.prototype.a=function(){return{subDomain:\"transit.router\",path:\"v8\"}};pq.CONFIG_KEY=\"publicTransit\";pq.prototype.rn=function(a,b,c){a=this.D().clone().G(\"routes\").K(a);return this.F(a,b,c)};pq.prototype.getRoutes=pq.prototype.rn;pq.prototype.Bm=function(a,b,c){a=this.D().clone().G(\"departures\").K(a);return this.F(a,b,c)};pq.prototype.getDepartures=pq.prototype.Bm;\npq.prototype.vn=function(a,b,c){a=this.D().clone().G(\"stations\").K(a);return this.F(a,b,c)};pq.prototype.getStations=pq.prototype.vn;pq.prototype.b=function(a){return Error(JSON.stringify(a))};Y.prototype.nn=function(a){return this.Ya(pq,a)};Y.prototype.getPublicTransitService=Y.prototype.nn;function qq(a){qq.l.constructor.call(this,qq,a)}u(qq,np);t(\"H.service.RoutingService\",qq);qq.prototype.a=function(){return{subDomain:\"route.ls\",path:\"routing/7.2\"}};qq.prototype.b=function(a){return Error(a.details)};qq.CONFIG_KEY=\"routing\";qq.prototype.Nd=function(a,b,c){a=this.D().clone().G(\"calculateroute.json\").K(a);return this.F(a,b,c)};qq.prototype.calculateRoute=qq.prototype.Nd;\nqq.prototype.Ul=function(a,b,c){a=this.D().clone().Ra(\"isoline\").G(\"calculateisoline.json\").K(a);return this.F(a,b,c)};qq.prototype.calculateIsoline=qq.prototype.Ul;function rq(a){rq.l.constructor.call(this,rq,a)}u(rq,np);t(\"H.service.RoutingService8\",rq);rq.CONFIG_KEY=\"routing_v8\";rq.prototype.a=function(){return{subDomain:\"router\",path:\"v8/routes\"}};rq.prototype.b=function(a){return Error(a.error)};rq.prototype.Nd=function(a,b,c){a=this.D().clone().K(a);return this.F(a,b,c)};rq.prototype.calculateRoute=rq.prototype.Nd;Y.prototype.Vj=function(a,b){b=+b||7;if(7===b)b=qq;else if(8===b)b=rq;else throw new D(this.Vj,1,\"allowed values are 7 and 8\");return this.Ya(b,a)};Y.prototype.getRoutingService=Y.prototype.Vj;function sq(){}t(\"H.service.extension.dataView.ITable\",sq);sq.prototype.Yd=function(){};sq.prototype.getMeta=sq.prototype.Yd;sq.prototype.ae=function(){};sq.prototype.getRowCount=sq.prototype.ae;sq.prototype.Cc=function(){};sq.prototype.getRow=sq.prototype.Cc;sq.prototype.Ta=function(){};sq.prototype.getColumnNames=sq.prototype.Ta;sq.prototype.Oe=function(){};sq.prototype.getColumn=sq.prototype.Oe;sq.prototype.xa=function(){};sq.prototype.getCell=sq.prototype.xa;sq.prototype.concat=function(){};\nsq.prototype.concat=sq.prototype.concat;function tq(){}t(\"H.service.extension.dataView.IRow\",tq);tq.prototype.Ta=function(){};tq.prototype.getColumnNames=tq.prototype.Ta;tq.prototype.xa=function(){};tq.prototype.getCell=tq.prototype.xa;tq.prototype.vd=function(){};tq.prototype.getTable=tq.prototype.vd;function uq(a,b){this.a=a;this.b=b}t(\"H.service.extension.dataView.ObjRow\",uq);uq.prototype.Ta=function(){return this.a.Ta()};uq.prototype.getColumnNames=uq.prototype.Ta;uq.prototype.xa=function(a){return this.a.xa(this.b,a)};uq.prototype.getCell=uq.prototype.xa;uq.prototype.vd=function(){return this.a};uq.prototype.getTable=uq.prototype.vd;function vq(){}t(\"H.service.extension.dataView.IColumn\",vq);vq.prototype.xa=function(){};vq.prototype.getCell=vq.prototype.xa;function wq(a,b){this.b=a;this.a=b}t(\"H.service.extension.dataView.ObjColumn\",wq);wq.prototype.xa=function(a){return this.b.xa(a,this.a)};wq.prototype.getCell=wq.prototype.xa;function xq(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):B);this.Hb=a;if(b)for(this.Od=b,this.gh=a=mc(),d=b.length;d--;)a[b[d]]=!0;c!==B&&(this.li=c)}t(\"H.service.extension.dataView.ObjTable\",xq);n=xq.prototype;n.li=B;n.Hb=B;n.Od=B;n.gh=B;n.Yd=function(){return this.li};xq.prototype.getMeta=xq.prototype.Yd;xq.prototype.ae=function(){return this.Hb?this.Hb.length:0};xq.prototype.getRowCount=xq.prototype.ae;xq.prototype.Cc=function(a){var b=this.Hb;return b&&b[a]?new uq(this,a):B};\nxq.prototype.getRow=xq.prototype.Cc;xq.prototype.Ta=function(){return this.Od||ff};xq.prototype.getColumnNames=xq.prototype.Ta;xq.prototype.Oe=function(a){return this.gh[a]?new wq(this,a):B};xq.prototype.getColumn=xq.prototype.Oe;xq.prototype.xa=function(a,b){var c=this.Hb;return(a=c&&this.gh[b]&&c[a])&&a[b]};xq.prototype.getCell=xq.prototype.xa;\nxq.prototype.concat=function(){var a=arguments.length,b,c=this.Od,d=\"\"+this.Od,e=(this.Hb||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof xq))throw new D(this.concat,b);if(f.Hb){if(c&&\"\"+f.Od!==d)throw new D(this.concat,b,\"Incompatible columns!\");e=e.concat(f.Hb)}}return new xq(e,this.Od,this.li)};xq.prototype.concat=xq.prototype.concat;function yq(a,b){a.Hb?a.Hb.push(b):a.Hb=[b];return a.Hb.length-1};function zq(a){var b=Aq;if(!a||!zc(Ze(a.layerId,a.layer))||!Cc(a.level)||tc(a.rowFilter)&&!Ca(a.rowFilter)||tc(a.rowFilterContext)&&!Da(a.rowFilterContext))throw new D(b,1,tc(\"invalid layer config\")?\"invalid layer config\":a);};function Bq(a,b,c,d){d=d||Cq;this.pf={};d.provider=a;this.invalidate=ef;Bq.l.constructor.call(this,b,d);delete this.invalidate;c&&(this.b=c);this.ua(Mg.ADD)}u(Bq,ah);t(\"H.service.remote.Spatial\",Bq);var Cq={};Bq.prototype.fb=function(){return this.b||ah.prototype.fb.call(this)};Bq.prototype.getId=Bq.prototype.fb;Bq.prototype.Fg=Function();Bq.prototype.retain=Bq.prototype.Fg;Bq.prototype.release=Function();Bq.prototype.release=Bq.prototype.release;function Dq(a,b){this.a=a;b&&(this.b=b)}\nvar Eq=new Dq([]);Bq.prototype.Wd=function(a){return(this.pf[a.key]||Eq).a};Bq.prototype.getGeometriesForTile=Bq.prototype.Wd;Bq.prototype.Ah=function(a){return(this.pf[a.key]||Eq).b};Bq.prototype.getLabels=Bq.prototype.Ah;function Fq(a,b,c){a.pf[b.key]=new Dq(c,void 0)};function Gq(a,b,c,d,e,f){Hq(Gq,1,b,c);Hq(Gq,2,d,e);(this.f=a.length)?(this.s=a,this.aa=b,this.i=c,this.b=0,this.c=A(this.c,this),this.o=d,this.j=e,this.a=mc(),Wa(this.a,Iq,f||{}),this.g={},x.setTimeout(this.c,0)):b(ff,!0)}var Iq={duration:100,lm:\"geometry\",km:\"WKT\",Ko:\"searchAttributes\",Bj:B};\nGq.prototype.c=function(){var a=[];var b=!1;for(var c=Ak(),d;this.b<this.f;){var e=this.s[this.b];b=e.attributes;d=e.layerId||this.a.Bj;e.distance&&(b[this.a.Ko]={nearest:new Xf(e.nearestLat,e.nearestLon),distance:e.distance});if(e=e[this.a.lm]){try{var f=sn(new Nn(e))}catch(g){this.i(new x.Error(g.message));b=!0;break}b[this.a.km]=f}(e=this.g[d])||(e=this.g[d]=this.o({layerId:d,columnNames:Object.keys(b)}));b=this.j(e,b);a.push(b);this.b++;if((b=this.b===this.f)||Ak()-c>=this.a.duration){this.aa(a,\nb);break}}b?this.g=y:this.m=x.setTimeout(this.c,0)};Gq.prototype.cancel=function(){x.clearTimeout(this.m);this.b<this.f&&this.i(new x.Error(\"parsing canceled\"))};Gq.prototype.cancel=Gq.prototype.cancel;function Hq(a,b,c,d){if(!Ca(c))throw new D(a,b,\"has invalid type\");if(!Ca(d))throw new D(a,b+1,\"has invalid type\");};function Jq(a,b,c){var d=8===a;this.b=b;this.c=c||id;(this.a=4===a||d)?this.j=d:this.g=1===a;this.f=this.a?\"$HProjGeometry\":\"geometry\"}\nJq.prototype.parse=function(a,b,c){var d,e,f={},g=[],h,k;var l=0;for(h=c.length;l<h;l++){var m=c[l];var q=m.Rows;if(m=q.length){var p=Object.keys(q[0]).filter(function(v){return\"geometry\"!==v&&\"$HProjGeometry\"!==v});p=new xq(q,p);for(k=0;k<m;k++){var r=q[k];if(e=r[this.f]){if(delete r[this.f],r=p.Cc(k))try{this.a?d=Kq(this,a,b,r,e):d=Lq(this,a,r,e.path),d.ja(a),g.push(d)}catch(v){this.c(v.message)}}else this.c(\"Layer must contain geometries\")}}}f[this.a?\"spatials\":this.g?\"markers\":\"domMarkers\"]=\ng;return f};function Kq(a,b,c,d,e){var f=[],g=e.paths,h=g.length,k=0,l=a.b&&a.b(d);for(a=new Bq(b,a.j,B,{style:l||a.i,data:d});k!==h;)f.push(Mq(g[k++]));Fq(a,c,[new qh(f,e.interiorsIndex,e.outlinesIndex)]);return a}function Lq(a,b,c,d){d=new Xf(d[0],d[1]);var e=a.b&&a.b(c);a.g?(a={icon:e,data:c,provider:b},a=new ln(d,a)):(a={icon:e,data:c,provider:b},a=new Pi(d,a));return a}function Mq(a){for(var b=0,c=a.length,d=[];b<c;)d.push(new I(a[b++],a[b++]));return d};function Nq(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback;tc(a.min)||(a.min=12);Nq.l.constructor.call(this,a);if(-1===Oq.indexOf(c))throw new D(Nq,2,\"invalid resultType\");this.a=c;if(d&&!Ca(d))throw new D(Nq,2,\"invalid style callback\");this.wa=d;this.W=a.pixelRatio||Se();this.Lb=A(this.Lb,this);this.O(new Ek(b,A(this.cc,this)));this.createTileInternal=4===c||8===c?A(this.N,this):A(this.I,this)}u(Nq,R);t(\"H.service.extension.TileProvider\",Nq);Nq.prototype.c=!1;\nNq.prototype.j=function(){return Nq.l.j.call(this)|192};Nq.prototype.ib=function(a,b,c,d){return this.c?Nq.l.ib.call(this,a,b,c,d):B};Nq.prototype.requestTile=Nq.prototype.ib;Nq.prototype.Lb=function(a){this.dispatchEvent(new td(\"error\",zc(a)?a:a+\"\",this))};Nq.prototype.Wb=function(){return 1===this.a};Nq.prototype.providesMarkers=Nq.prototype.Wb;Nq.prototype.Vb=function(){return 2===this.a};Nq.prototype.providesDomMarkers=Nq.prototype.Vb;Nq.prototype.Kc=function(){return 4===this.a||8===this.a};\nNq.prototype.providesSpatials=Nq.prototype.Kc;function Pq(a){var b=a.yb;b||(a.v||(a.v=a.s(a.a,a.wa,a.Lb)),b=a.yb=new Yp(a.v),b.ja(a),b.addEventListener(a.g.Da,A(a.jb,a)),b.yb=!0);return b}Nq.prototype.I=function(a,b,c,d){var e=this.getTileKey(a,b,c);e=this.Pb().get(e);var f=2==this.a,g=[],h=Pq(this);e?e.valid=!0:(a=e=new Mk(a,b,c,y),delete a.j,a.m=d);d=f?$p(h,e,\"domMarkers\"):$p(h,e,\"markers\");for(b=d.length;b--;)a=d[b],a.aj=e,(f||1===a.Cb().getState())&&g.push(a);e.data=g;return e};\nNq.prototype.jb=function(a){if(a=a.target.aj)a.valid=!1};Nq.prototype.Oo=function(a){this.C=!!a};Nq.prototype.setTileCanvasRendering=Nq.prototype.Oo;Nq.prototype.C=!0;Nq.prototype.N=function(a,b,c,d){var e=Pq(this),f=this.getTileKey(a,b,c),g=this.tileSize,h=this.Pb().get(f);h||(a=h=new Qk(f,a,b,c,g,this.W,c,e),delete a.j,a.m=d);this.C?(d=zp.pop(g),h.V(d)||zp.push(d,g)):Wk(h);return h};\nNq.prototype.cc=function(a,b){var c;if(4===this.a||8===this.a){a=b.Ua();for(c=a.length;c--;)delete a[c].pf[b.key];b.data&&(zp.push(b.Ag(),this.tileSize),b.Bg())}else for(a=b.data,c=a.length;c--;)delete a[c].aj};Nq.prototype.u=function(){Nq.l.u.call(this);Pq(this).B()};var Qq={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};Nq.ResultType=Qq;var Oq=[1,2,4,8];function Aq(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType;Aq.l.constructor.call(this,c);C(a,Rq,Aq,0);zq(b);e?(c=Ua(b),c.rowFilter=e.toString()):c=Ua(b);delete c.layer;c.layerId=Ze(b.layerId,b.layer);(new Mf).a(\"pde\",\"H.service.extension.worker.processor\");a=a.D().clone().G(Sq+\".\"+Tq).K({meta:1});(new Pf(\"pde\",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===f,serverUrl:a.toString(),layerConfigs:[c],horizontalMargin:1}]})).then(function(){d.c=!0;Uj(d)},this.Lb)}\nu(Aq,Nq);t(\"H.service.extension.platformData.TileProvider\",Aq);Aq.prototype.s=function(a,b,c){a=new Jq(a,b,c);a.i=Uq;return a};var Uq=new O({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0,lineJoin:\"round\",lineCap:\"round\"});\nAq.prototype.F=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Pb().get(g);var k={cancel:id},l=!0,m=this.a;g&&(4===m||8===m?g.fe()||(d(zp.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var q=xp.setTimeout(function(){h=new Pf(\"pde\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():xp.clearTimeout(q)}}return k};Aq.prototype.requestInternal=Aq.prototype.F;Aq.prototype.u=function(){Aq.l.u.call(this);new Pf(\"pde\",{message:[this.uid,3]})};\nAq.ResultType=Qq;function Vq(a){this.a=a}Vq.prototype.cancel=function(){for(var a=this.a,b=a.length;b--;)a[b].cancel();a.length=0};function Rq(a){Rq.l.constructor.call(this,Rq,a)}u(Rq,np);t(\"H.service.extension.platformData.Service\",Rq);Rq.prototype.a=function(){return{subDomain:\"s.fleet.ls\",path:\"1\"}};Rq.CONFIG_KEY=\"platformData\";Rq.prototype.request=function(a,b,c,d,e){return this.va(a,b,c,d,e)};\nRq.prototype.va=function(a,b,c,d,e){var f=\"text/plain\";if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);if(!d)throw new D(this.request,3,d);if(!e)throw new D(this.request,4,e);a=this.D().clone().G(a+\".\"+b).K(c);b===Wq.JSON&&(f=\"application/json\");return this.F(a,d,e,f)};var Sq=\"tiles\";\nRq.EntryPoint={DOC_ATTRIBUTES:\"doc/attributes\",DOC_LAYER:\"doc/layer\",DOC_LAYERS:\"doc/layers\",DOC_MAPS:\"doc/maps\",DOC_INDEXES:\"doc/indexes\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SERVICE_CONFIGURATION:\"serviceconfiguration\",STATIC:\"static\",TILE:\"tile\",TILES:Sq,FILE:\"file\",INDEX:\"index\"};var Tq=\"json\",Wq={TXT:\"txt\",JSON:Tq,HTML:\"html\",BIN:\"bin\"};Rq.EntryPointType=Wq;\nRq.prototype.wc=function(a,b){var c=b&&b.resultType;a=new Aq(this,a,b);var d;1==c||2===c?d=new on(a):d=new ml(a);return d};Rq.prototype.createTileLayer=Rq.prototype.wc;Rq.prototype.Gd=function(a,b,c,d){var e=[],f,g=b.layer_id||b.layer_ids;a=this.request(a,Tq,b,function(h){f=new Gq(h.geometries,c,d,function(k){return new xq([],k.columnNames,k)},function(k,l){return k.Cc(yq(k,l))},{Bj:g});e.push(f)},function(h){d(new x.Error(h))});e.push(a);return new Vq(e)};\nfunction Xq(a,b,c){if(!yc(a))throw new D(c,0,\"has invalid type\");if(!yc(b))throw new D(c,1,\"has invalid type\");if(a.length!==b.length||!a.length)throw new D(c,1,\"specify one key attribute for each given layer id in the same order\");}\nRq.prototype.Nc=function(a,b,c,d,e,f){function g(l,m){m&&h--;d(l,!h)}var h,k=[];Xq(a,b,this.Nc);Hq(this.Nc,3,d,e);C(c,K,this.Nc,2);c={bbox:c.ka+\",\"+c.ca+\";\"+c.ma+\",\"+c.ga};f&&Wa(c,f);a=c.layer_id?[c.layer_id]:a;f=0;for(h=a.length;f<h;f++)c.layer_id=a[f],c.key_attribute=b[f],k.push(this.Gd(\"search/bbox\",c,g,e));return new Vq(k)};Rq.prototype.searchByBoundingBox=Rq.prototype.Nc;\nRq.prototype.Yb=function(a,b,c,d,e,f,g){Xq(a,b,this.Yb);C(c,Xf,this.Yb,2,\"has invalid type\");if(!Cc(d))throw new D(this.Yb,3,\"has invalid type\");Hq(this.Yb,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),proximity:c.lat+\",\"+c.lng+\",\"+d};g&&Wa(a,g);return this.Gd(\"search/proximity\",a,e,f)};Rq.prototype.searchByProximity=Rq.prototype.Yb;\nRq.prototype.Xb=function(a,b,c,d,e,f,g){var h=\"\";Xq(a,b,this.Xb);if(!zc(c)&&!C(c,L))throw new D(this.Xb,1,\"has invalid type\");if(!Cc(d))throw new D(this.Xb,2,\"has invalid type\");Hq(this.Xb,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),radius:d};if(zc(c))a.route_id=c;else{d=c.Y;c=0;for(b=d.length;c<b;c+=3)h+=d[c]+\",\"+d[c+1],c<b-3&&(h+=\";\");a.corridor=h}g&&Wa(a,g);return this.Gd(\"search/corridor\",a,e,f)};Rq.prototype.searchByCorridor=Rq.prototype.Xb;\nY.prototype.hn=function(a){return this.Ya(Rq,a)};Y.prototype.getPlatformDataService=Y.prototype.hn;function Yq(a){Yq.l.constructor.call(this,Yq,a)}u(Yq,np);t(\"H.service.extension.geofencing.Service\",Yq);Yq.prototype.a=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};Yq.CONFIG_KEY=\"geofencing\";Yq.prototype.request=function(a,b,c,d){return this.va(a,b,c,d)};Yq.prototype.b=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a.message||a.response_code)};\nYq.prototype.va=function(a,b,c,d){if(!a)throw new D(this.request,0,a);if(!Ca(c))throw new TypeError(\"onResult must be a function\");if(!Ca(d))throw new TypeError(\"onError must be a function\");a=this.D().clone().G(a+\".json\").K(b);return this.F(a,c,d)};Yq.EntryPoint={SEARCH_PROXIMITY:\"search/proximity\"};Y.prototype.Jm=function(a){return this.Ya(Yq,a)};Y.prototype.getGeofencingService=Y.prototype.Jm;t(\"H.service.extension.customLocation.Permission\",{READ:\"read\",WRITE:\"write\",EXPORT:\"export\"});t(\"H.service.extension.customLocation.Storage\",{READONLY:\"readonly\",UPDATABLE:\"updatable\"});function Zq(a){var b=$q;if(!a||!zc(a.layerId)||tc(a.rowFilter)&&!Ca(a.rowFilter)||tc(a.rowFilterContext)&&!Da(a.rowFilterContext))throw new D(b,1,tc(\"invalid layer config\")?\"invalid layer config\":a);}function ar(a){return zc(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function br(a){for(var b=a&&a.length,c=2<=b&&\"WKT\"===a[--b]&&\"GEOMETRY_ID\"===a[--b];c&&b--;)c=ar(a[b]);return c}\nfunction cr(a,b){var c=\"\",d,e,f=[];if(!b){var g={};f=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)b=a.geometries[e],g[b.layerId]||(g[b.layerId]=[]),g[b.layerId].push(b);for(d in g)f.push({layerId:d,geometries:g[d]});for(d=0;d<f.length;d++)c+=cr(f[d],f[d].layerId)}else if(a.geometries&&a.geometries.length)for(e=Object.keys(a.geometries[0].attributes),c=c+(\"Meta:\\t\"+b+\"\\n\")+e.join(\"\\t\"),c+=\"\\tWKT\\n\",d=0;d<a.geometries.length;d++){var h=a.geometries[d].attributes;g=a.geometries[d].geometry;for(b=\n0;b<e.length;b++)f.push(h[e[b]]);c+=f.join(\"\\t\");c+=\"\\t\"+g+\"\\n\";f=[]}return c};function $q(a,b,c){var d=this,e=b&&b.rowFilter,f;$q.l.constructor.call(this,c);C(a,dr,$q,0);var g=c.resultType;Zq(b);if(e){var h=Ua(b);h.rowFilter=e.toString()}else h=b;(new Mf).a(\"cle\",\"H.service.extension.worker.processor\");var k=b.layerId;a.request(er,fr,{detail_level:\"all\",layer_id:k},function(l){l=l.layers;var m;for(m=0;m<l.length;m++)if(l[m].layerId===k){h.level=l[m].level;break}f=a.D().clone().G(gr+\".\"+fr).K({meta:1});(new Pf(\"cle\",{message:[d.uid,0,{tileSize:d.tileSize,projected:!0,onlyOutline:4===\ng,serverUrl:f.toString(),layerConfigs:[h],batchTiles:!1,horizontalMargin:1}]})).then(function(){d.c=!0;Uj(d)},d.Lb)},function(l){d.Lb(l.message)})}u($q,Nq);t(\"H.service.extension.customLocation.TileProvider\",$q);$q.prototype.s=function(a,b,c){return new Jq(a,b,c)};\n$q.prototype.F=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Pb().get(g);var k={cancel:id},l=!0,m=this.a;g&&(4===m||8===m?g.fe()||(d(zp.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var q=xp.setTimeout(function(){h=new Pf(\"cle\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():xp.clearTimeout(q)}}return k};$q.prototype.requestInternal=$q.prototype.F;$q.prototype.u=function(){$q.l.u.call(this);new Pf(\"cle\",{message:[this.uid,3]})};function hr(){if(ir)throw new Yc(hr);}t(\"H.service.extension.customLocation.Table\",hr);var ir=!0;function jr(a,b){var c;ir=!1;var d=new hr;ir=!0;d.c=pc(x.JSON.parse(x.JSON.stringify(a)));a=a.columnNames;var e=mc();for(c=a.length;c--;)e[a[c]]=c;d.f=e;d.b=a.length;if(b){if(b.length%a.length)throw new D(jr,1,\"Invalid number of cells\");}else b=[];d.a=b;return d}hr.prototype.Yd=function(){return this.c};hr.prototype.getMeta=hr.prototype.Yd;hr.prototype.ae=function(){return this.a.length/this.b};\nhr.prototype.getRowCount=hr.prototype.ae;hr.prototype.Cc=function(a){return a<this.a.length/this.b?new kr(this,a):B};hr.prototype.getRow=hr.prototype.Cc;hr.prototype.sn=function(){var a=this.a.length/this.b,b,c=new x.Array(a);for(b=0;b<a;b++)c[b]=new kr(this,b);return c};hr.prototype.getRows=hr.prototype.sn;hr.prototype.Wg=function(a){var b=this.b,c=this.a,d=c.length/this.b;if(!a||a.length%b)throw new D(this.Wg,0,\"Invalid number of cells\");this.a=c.concat(a);return d};hr.prototype.addCells=hr.prototype.Wg;\nhr.prototype.Nl=function(){for(var a=this.b,b=this.a,c=this.a.length/this.b;a--;)b.push(y);return this.Cc(c)};hr.prototype.addRow=hr.prototype.Nl;hr.prototype.Ta=function(){return this.c.columnNames};hr.prototype.getColumnNames=hr.prototype.Ta;hr.prototype.Oe=function(a){return this.f[a]===B?B:new lr(this,a)};hr.prototype.getColumn=hr.prototype.Oe;hr.prototype.xa=function(a,b){return this.a[a*this.b+this.f[b]]};hr.prototype.getCell=hr.prototype.xa;\nhr.prototype.Oc=function(a,b,c){b=this.f[b];if(a>=this.a.length/this.b)throw new D(this.Oc,0,\"Row index out of bounds\");if(b===B)throw new D(this.Oc,0,\"Column unknown\");this.a[a*this.b+b]=c};hr.prototype.setCell=hr.prototype.Oc;\nhr.prototype.concat=function(a){var b=arguments.length,c,d=\"\"+this.Ta(),e=this.a?this.a.slice():[];for(c=0;c<b;c++){var f=arguments[c];if(!(f instanceof hr))throw new D(this.concat,c);if(\"\"+f.Ta()!==d)throw new D(this.concat,c,\"Incompatible columns!\");f.a&&(e=e.concat(f.a))}return jr(this.c,e)};hr.prototype.concat=hr.prototype.concat;var mr=/(\\n|\\t|\\r|\")/;\nhr.prototype.Xi=function(a,b){var c,d=this.b,e=this.Ta(),f=[],g=[],h=this.a,k=-1;for(c=0;c<d;c++)if(!a||a.test(e[c]))\"WKT\"===e[c]&&(k=f.length),f.push(c);if(!(a=f.length))throw new D(this.Xi,1,\"No columns filtered\");nr(this,g,e,0,d,f,a,k);if(b){var l=b.length;for(c=0;c<l;c++)g.push(\"\\n\"),e=b[c],nr(this,g,h,e,d,f,a,k)}else for(l=this.ae(),e=0;e<l;e++)g.push(\"\\n\"),nr(this,g,h,e,d,f,a,k);return g.join(\"\")};\nfunction nr(a,b,c,d,e,f,g,h){var k;for(k=0;k<g;k++){k&&b.push(\"\\t\");var l=c[d*e+f[k]];if(k!==h){if(l!==y){l=String(l);if(mr.test(l))throw new D(a.Xi,0,'Invalid character (\\\\n, \\\\r, \\\\t, or \") in row '+d+\" column \"+a.c.columnNames[f[k]]);b.push(l)}}else b.push(l)}}function lr(a,b){this.b=a;this.a=b}hr.Column=lr;lr.prototype.xa=function(a){return this.b.xa(a,this.a)};lr.prototype.getCell=lr.prototype.xa;lr.prototype.Oc=function(a,b){this.b.Oc(a,this.a,b)};lr.prototype.setCell=lr.prototype.Oc;\nfunction kr(a,b){this.a=a;this.ii=b}hr.Row=kr;kr.prototype.Ta=function(){return this.a.Ta()};kr.prototype.getColumnNames=kr.prototype.Ta;kr.prototype.xa=function(a){return this.a.xa(this.ii,a)};kr.prototype.getCell=kr.prototype.xa;kr.prototype.Oc=function(a,b){this.a.Oc(this.ii,a,b)};kr.prototype.setCell=kr.prototype.Oc;kr.prototype.vd=function(){return this.a};kr.prototype.getTable=kr.prototype.vd;function or(a){if(a===B)a=\"\\t\";else if(!/^[^\"\\r\\n]$/.test(a))throw new D(or,0);this.b=String(a).charCodeAt(0);this.ji=A(this.ji,this);this.A=pr}var pr=0;n=or.prototype;n.getState=function(){return this.A};function qr(a,b,c){var d=a.A;if(d!==b)throw 1===d&&(a.A=pr),new Yc(c,\"Requires state: \"+[\"READY\",\"PARSE\",\"PAUSE\"][b]+\" but found \"+[\"READY\",\"PARSE\",\"PAUSE\"][d]);}n.abort=function(){qr(this,2,or.prototype.abort);this.A=pr};\nn.ji=function(a){this.A=pr;throw new D(or.prototype.parse,0,\"Malformed DSV at row \"+this.a.j+\" column \"+this.a.b+\": \"+a);};function rr(a,b){var c=[];a.parse(b,function(d,e,f){1>d&&(c[e]=f);return 0<d});a.A=pr;return c}n.parse=function(a,b,c){qr(this,pr,or.prototype.parse);a=a.trim();this.a=new sr(a,this.b,this.ji);this.c=b;this.Dk=c||ef;this.A=2;this.resume()};n.Dk=ef;\nn.resume=function(){var a=this.a,b=[];qr(this,2,or.prototype.resume);this.A=1;do{if(!a.g){this.A=pr;break}if(e>a.b){if(void 0!==c&&c!==e){this.a.a(\"The number of columns must be the same for all rows\");return}var c=e}var d=a.j;var e=a.b;var f=a.Mf;var g=this.Dk(d,e,a);if(a.Mf>f)for(;-1!==a.next(););else{for(;-1!==(f=a.next());)b.push(f);g=String.fromCharCode.apply(y,b);b.length=0}tr(a);this.c(d,e,g)&&(this.A=a.g?2:pr)}while(1===this.A);2!=this.A&&void 0!==c&&0<e&&c!==e&&this.a.a(\"The number of columns must be the same for all rows\")};\nfunction sr(a,b,c){this.c=new Nn(a);this.m=b;this.g=!0;this.Mf=this.j=this.b=0;tr(this);this.a=c;this.f=[];this.i=!1}n=sr.prototype;n.Mf=0;function tr(a){var b=a.c.Tb();a.o=!1;(a.aa=34===b)&&a.c.next()}function ur(a,b){var c=a.c;a.o=!0;switch(b){case a.m:a.b++;break;case 13:c.next(),10!==c.Tb()&&a.a(\"CR without LF\");case 10:a.b=0;a.j++;break;case -1:a.g=!1;break;default:a.a(\"End of field expected\")}c.next();return-1}\nn.Tb=function(){if(this.o)var a=-1;else{var b=this.c;a=b.Tb();if(this.aa)switch(a){case 34:b.next();a=b.Tb();34!==a&&(a=ur(this,a));break;case -1:this.a(\"Closing quotation mark expected\")}else switch(a){case 34:this.a(\"Unexpected quotation mark\");case this.m:case 13:case 10:case -1:a=ur(this,a)}}return a};n.te=function(){this.i=!0;this.f=[]};n.Sd=function(){var a=this.f.slice();this.i=!1;this.f=[];return a};n.next=function(){var a=this.Tb();-1!==a&&this.c.next();this.i&&this.f.push(a);this.Mf++;return a};function vr(a,b,c,d){d=d||{};if(!b)throw new D(vr,1,\"has to be a function\");if(!c)throw new D(vr,2,\"has to be a function\");this.c=b;this.g=c;this.a=[];this.i=d.duration||wr;this.b=A(this.b,this);this.f={};a=a.split(\"Meta:\\t\").slice(1);for(b=0;b<a.length;b++){d=a[b].split(\"\\n\");c=d[0].split(\"\\t\")[0];d=d.slice(1).join(\"\\n\");this.Rd[c]=new or;this.hi[c]=rr(this.Rd[c],d);var e={layerId:c,columnNames:this.hi[c]};this.Vh.push(c);this.f[c]=jr(e);this.Tc[c]=Ak();xr(this,d,c);this.b(c)}}var wr=100;n=vr.prototype;\nn.hi={};n.Vh=[];n.Rd={};n.Tc={};n.Wi={};function xr(a,b,c){var d=[],e=a.hi[c].length-1,f=a.f[c];try{a.Rd[c].parse(b,function(g,h,k){var l=!1;0<g&&(d[h]=k,h===e&&(a.a.push(f.Cc(f.Wg(d))),Ak()-a.Tc[c]>a.i&&(l=!0)));return l},function(g,h,k){if(0<g&&h===e)return sn(k)})}catch(g){a.g(g)}}n.cancel=function(){for(var a in this.Wi)x.clearTimeout(this.Wi[a])};vr.prototype.cancel=vr.prototype.cancel;\nvr.prototype.b=function(a){var b=this,c,d;this.Wi[a]=x.setTimeout(function(){if(2===b.Rd[a].getState())b.Tc[a]=Ak(),b.c(b.a,!1),b.a=[],b.Rd[a].resume(),b.b(a);else{c=!0;for(d=0;d<b.Vh.length;d++)if(b.Rd[b.Vh[d]].getState()!==pr){c=!1;break}c&&(0<b.a.length&&b.c(b.a,!0),b.a=[])}},0)};function dr(a){dr.l.constructor.call(this,dr,a)}u(dr,np);t(\"H.service.extension.customLocation.Service\",dr);dr.prototype.a=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};dr.CONFIG_KEY=\"customLocation\";dr.prototype.wc=function(a,b){var c=b&&b.resultType;a=new $q(this,a,b);var d;1===c||2===c?d=new on(a):d=new ml(a);return d};dr.prototype.createTileLayer=dr.prototype.wc;\nfunction yr(a,b,c,d){var e;a=a===zr?\"changes\":\"file\";var f=b[a],g=zc(f),h=!g&&C(f,Blob);if(!g&&!h)throw new D(d,0,\"Invalid \"+a+\" parameter\");if(Ar)h?e=f:e=nf(f,\"text/plain\"),d=new x.FormData,d.append(a,e,e.name||a+\".wkt\"),c.method=\"POST\",c.data=d,delete b[a];else if(h)throw new D(d,0,\"Sending Blob data is not supported by the browser\");}var Ar=x.FormData&&!!x.FormData.prototype.append;dr.prototype.request=function(a,b,c,d,e){return this.va(a,b,c,d,e)};\ndr.prototype.va=function(a,b,c,d,e){var f=\"text/plain\",g=a===Br.LAYERS_UPLOAD||a===Br.LAYERS_MODIFY||a===Br.LAYERS_IMPORT,h=c,k={data:B,method:\"GET\",headers:this.bf};if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);Hq(this.request,3,d,e);g&&(C(c,Object,this.request,2,\"Invalid request parameters\"),h=Ua(c),yr(a,h,k,this.request));var l=this.D().clone().G(a+\".\"+b).K(h);b===Cr.JSON&&(f=\"application/json\");a=new rf(f,l.toString(),fe,k);a.then(function(m){var q=m.issues;q&&m.error_id&&\nm.response_code?e(Error(q[0].message)):d(m)},function(m){\"error\"===m.type||404===m.status?e(Error(m.statusText||\"Unable to load data\")):m.json().then(function(q){e(Error(\"[\"+q.issues[0].message+\"] \"+l+\" request failed\"))},function(){e(Error(\"[\"+m.statusText+\"] \"+l+\" request failed\"))})});return a};\nvar er=\"layers/list\",zr=\"layers/modify\",gr=\"tiled/tile\",Br={LAYERS_DELETE:\"layers/delete\",LAYERS_GRANT:\"layers/access/grant\",LAYERS_LIST:er,LAYERS_MODIFY:zr,LAYERS_UPLOAD:\"layers/upload\",LAYERS_IMPORT:\"layers/import\",SEARCH_ALL:\"search/all\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SEARCH_TILE:gr};dr.EntryPoint=Br;var fr=\"json\",Cr={TXT:\"txt\",JSON:fr};dr.EntryPointType=Cr;\ndr.prototype.sb=function(a,b,c){var d=this;return this.request(\"search/all\",\"txt\",{filter:'WKT==\"\"',layer_id:a},function(e){var f=e.replace(/[\\r\\n]+$/g,\"\").split(\"\\t\");d.request(er,fr,{layer_id:a,detail_level:\"all\"},function(g){g=g.layers[0];g.columnNames=f;b(jr(g))},c)},c)};dr.prototype.getLayer=dr.prototype.sb;\ndr.prototype.ak=function(a,b,c,d){function e(){return++g<f?h.request(\"layers/access/grant\",fr,{layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(\",\")},e,d):h.sb(a,c,d)}var f=b&&b.length,g=-1,h=this;return e()};dr.prototype.grantAccess=dr.prototype.ak;dr.prototype.Cj=function(a,b,c){return this.request(\"layers/delete\",fr,{layer_ids:a},b,c)};dr.prototype.deleteLayer=dr.prototype.Cj;\ndr.prototype.od=function(a,b,c){function d(){setTimeout(function(){k.sb(g,function(p){setTimeout(e.bind(null,p),m)},function(){64E3>l?(l+=m,d()):c(x.Error(\"Timeout\"))})},m);m*=2}function e(p){var r=JSON.stringify(p.Ta()),v=a.grants;if(r!==JSON.stringify(h)){var w=\"Results into different column names on the backend: \"+r;setTimeout(function(){k.Cj(g,function(){c(x.Error(w))},function(z){c(x.Error(w+\". \"+z.message))})},m)}else v&&v.length?k.ak(g,v,b,c):b(p)}var f,g,h,k=this,l=0,m=1E3;var q=!a||!ar(g=\na.layerId)&&(f=\"layerId\")||!br(h=a.columnNames)&&(f=\"columnNames\")?0:Ca(b)?Ca(c)?-1:2:1;if(0<=q)throw new D(k.od,q,f||arguments[q]);return k.sb(g,function(){c(x.Error(\"Layer exists already\"))},function(){var p={layer_id:g,file:h.join(\"\\t\")},r=a.level,v=a.storage;r!==B&&(p.level=r);v!==B&&(p.storage=v);k.request(\"layers/upload\",fr,p,d,c)})};dr.prototype.createLayer=dr.prototype.od;\ndr.prototype.Gd=function(a,b,c,d){var e=[],f;a=this.request(a,fr,b,function(g){g.geometries.length?(g=cr(g,b.layer_id),f=new vr(g,c,d),e.push(f)):c(ff,!0)},d);e.push(a);return new Vq(e)};dr.prototype.Yb=function(a,b,c,d,e,f){if(!yc(a))throw new D(this.Yb,0,\"has invalid type\");C(b,Xf,this.Yb,1,\"has invalid type\");if(!Cc(c))throw new D(this.Yb,2,\"has invalid type\");Hq(this.Yb,3,d,e);a={layer_ids:a.join(\",\"),proximity:b.lat+\",\"+b.lng+\",\"+c};f&&Wa(a,f);return this.Gd(\"search/proximity\",a,d,e)};\ndr.prototype.searchByProximity=dr.prototype.Yb;dr.prototype.Xb=function(a,b,c,d,e,f){var g=\"\";if(!yc(a))throw new D(this.Xb,0,\"has invalid type\");if(!zc(b)&&!C(b,L))throw new D(this.Xb,1,\"has invalid type\");if(!Cc(c))throw new D(this.Xb,2,\"has invalid type\");Hq(this.Xb,3,d,e);a={layer_ids:a.join(\",\"),radius:c};if(zc(b))a.route_id=b;else{var h=b.Y;b=0;for(c=h.length;b<c;b+=3)g+=h[b]+\",\"+h[b+1],b<c-3&&(g+=\",\");a.corridor=g}f&&Wa(a,f);return this.Gd(\"search/corridor\",a,d,e)};\ndr.prototype.searchByCorridor=dr.prototype.Xb;dr.prototype.Nc=function(a,b,c,d,e){function f(k,l){l&&h--;c(k,!h)}var g=[],h;if(!yc(a))throw new D(this.Nc,0,\"has invalid type\");C(b,K,this.Nc,1,\"has invalid type\");Hq(this.Nc,2,c,d);b={bbox:b.ka+\",\"+b.ca+\";\"+b.ma+\",\"+b.ga};e&&Wa(b,e);a=b.layer_id?[b.layer_id]:a;e=0;for(h=a.length;e<h;e++)b.layer_id=a[e],g.push(this.Gd(\"search/bbox\",b,f,d));return new Vq(g)};dr.prototype.searchByBoundingBox=dr.prototype.Nc;\ndr.prototype.Ci=function(a,b,c,d){var e,f=[];if(!zc(a))throw new D(this.Ci,0,\"has invalid type\");Hq(this.Ci,1,b,c);var g={layer_id:a};d&&Wa(g,d);d=this.request(\"search/all\",fr,g,function(h){h.geometries.length?(h=cr(h,a),e=new vr(h,b,c),f.push(e)):b(ff,!0)},c);f.push(d);return new Vq(f)};dr.prototype.searchAll=dr.prototype.Ci;var Dr={\"delete\":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};\nfunction Er(a,b,c,d,e,f){function g(){v++;d(this,v===p)}function h(W){v++;e(W,this,v===p)}var k=\"append\"!==b,l,m={},q=mc(),p=0,r=[],v=0;if(!yc(c))throw new D(f,0,c);Hq(f,1,d,e);for(l=c.length;l--;){var w=c[l];if(C(w,kr)){var z=w.vd().Yd().layerId;var J=w.xa(\"GEOMETRY_ID\");if(k){if(J===y||\"\"===String(J))var G='GEOMETRY_ID must not be null or \"\"';m[J=z+\"_\"+J]&&(G=\"same GEOMETRY_ID for multiple rows\");m[J]=w}else J!==y&&\"\"!==String(J)&&(G='GEOMETRY_ID must be null or \"\"')}else G=\"Invalid type\";if(G)throw new D(f,\n0,\"- Invalid row at index \"+l+\", \"+G);J=q[z];J||(J=q[z]=[],p++);J.push(w)}for(z in q){J=q[z];c=[];for(l=J.length;l--;)c.push(J[l].ii);r.push(a.request(zr,fr,{layer_id:z,action:b,changes:J[0].vd().Xi(Dr[b]||null,c)},A(g,J),A(h,J)))}return new Vq(r)}dr.prototype.uj=function(a,b,c){return Er(this,\"append\",a,b,c,this.uj)};dr.prototype.appendRows=dr.prototype.uj;dr.prototype.Bl=function(a,b,c){return Er(this,\"update\",a,b,c,this.Bl)};dr.prototype.updateRows=dr.prototype.Bl;\ndr.prototype.Dj=function(a,b,c){return Er(this,\"delete\",a,b,c,this.Dj)};dr.prototype.deleteRows=dr.prototype.Dj;Y.prototype.zm=function(a){return this.Ya(dr,a)};Y.prototype.getCustomLocationService=Y.prototype.zm;function Fr(a){kq.l.constructor.call(this,Fr,a)}u(Fr,np);t(\"H.service.extension.customRoute.Service\",Fr);Fr.prototype.a=function(){return{subDomain:\"s.fleet.ls\",path:\"2\"}};Fr.CONFIG_KEY=\"customRoute\";Fr.prototype.b=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a)};Fr.prototype.Nd=function(a,b,c){Hq(this.Nd,1,b,c);a=this.D().clone().G(\"calculateroute.json\").K(a);return this.F(a,b,c)};Fr.prototype.calculateRoute=Fr.prototype.Nd;\nY.prototype.Am=function(a){return this.Ya(Fr,a)};Y.prototype.getCustomRoutingService=Y.prototype.Am;function Gr(a){Gr.l.constructor.call(this,Gr,a)}u(Gr,np);t(\"H.service.SearchService\",Gr);Gr.CONFIG_KEY=\"search\";Gr.prototype.a=function(){return{subDomain:\"search\",path:\"v1\"}};Gr.prototype.b=function(a){a=[a.title,a.action,a.cause].filter(function(b){return b});return Error(a.join(\". \"))};Gr.prototype.sh=function(a,b,c){a=this.D().clone().Ra(\"geocode\").G(\"geocode\").K(a);return this.F(a,b,c)};Gr.prototype.geocode=Gr.prototype.sh;\nGr.prototype.Bi=function(a,b,c){a=this.D().clone().Ra(\"revgeocode\").G(\"revgeocode\").K(a);return this.F(a,b,c)};Gr.prototype.reverseGeocode=Gr.prototype.Bi;Gr.prototype.Rl=function(a,b,c){a=this.D().clone().Ra(\"autosuggest\").G(\"autosuggest\").K(a);return this.F(a,b,c)};Gr.prototype.autosuggest=Gr.prototype.Rl;Gr.prototype.$l=function(a,b,c){a=this.D().clone().Ra(\"discover\").G(\"discover\").K(a);return this.F(a,b,c)};Gr.prototype.discover=Gr.prototype.$l;\nGr.prototype.bo=function(a,b,c){a=this.D().clone().Ra(\"lookup\").G(\"lookup\").K(a);return this.F(a,b,c)};Gr.prototype.lookup=Gr.prototype.bo;Gr.prototype.Tl=function(a,b,c){a=this.D().clone().Ra(\"browse\").G(\"browse\").K(a);return this.F(a,b,c)};Gr.prototype.browse=Gr.prototype.Tl;Y.prototype.un=function(a){return this.Ya(Gr,a)};Y.prototype.getSearchService=Y.prototype.un;function Hr(a){this.g=!!a.toBypassToken;if(!this.g&&!a.token)throw new D(Hr,0,'\"token\" must be specified');Hr.l.constructor.call(this,Hr,a);this.j=a.token;this.i={};this.f={}}u(Hr,np);t(\"H.service.xyz.Service\",Hr);Hr.prototype.a=function(){return{host:\"xyz.api.here.com\",path:\"hub/spaces\"}};Hr.prototype.b=function(a){return Error(a.errorMessage||a.message)};\nHr.prototype.Eh=function(a,b,c){wc(a,\"String\",this.Eh,0,'\"projectId\" must be a string');Ir(this.Eh,1,b,c);a=Jr(this.D().clone().qe(\"project-api/projects/\"+a));return this.F(a,b,c)};Hr.prototype.getProject=Hr.prototype.Eh;Hr.prototype.Wj=function(a,b,c){Ir(this.Wj,0,a,b);c=Kr(this,this.D().clone().K(c||{}));return this.F(c,a,b)};Hr.prototype.getSpaces=Hr.prototype.Wj;\nHr.prototype.fg=function(a,b,c){wc(a,\"String\",this.fg,0,'\"spaceId\" must be a string');Ir(this.fg,1,b,c);a=Kr(this,this.D().clone().G(a));return this.F(a,b,c)};Hr.prototype.getSpace=Hr.prototype.fg;Hr.prototype.ud=function(a,b,c){wc(a,\"String\",this.ud,0,'\"spaceId\" must be a string');Ir(this.ud,1,b,c);a=Kr(this,this.D().clone().G(a+\"/statistics\"));return this.F(a,b,c)};Hr.prototype.getStatistics=Hr.prototype.ud;\nHr.prototype.ag=function(a,b,c,d,e,f,g){a=Kr(this,this.D().clone().G(d+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+\".mvtf\").K(Object.assign({clip:!0},g)));return this.F(a,function(h){return h.arrayBuffer().then(e)},f,\"arraybuffer\")};Hr.prototype.search=function(a,b,c,d){wc(a,\"String\",this.search,0,'\"spaceId\" must be a string');Ir(this.search,1,b,c);a=Kr(this,this.D().clone().G(a+\"/search\").K(d||{}));return this.F(a,b,c)};Hr.prototype.search=Hr.prototype.search;\nHr.prototype.ic=function(a,b,c,d){wc(a,\"String\",this.ic,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.ic,1,'\"params\" must be an object');Ir(this.ic,2,c,d);a=Kr(this,this.D().clone().G(a+\"/features\").K(b));return this.F(a,c,d)};Hr.prototype.getFeaturesById=Hr.prototype.ic;\nHr.prototype.dd=function(a,b,c,d){wc(a,\"String\",this.dd,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.ic,1,'\"params\" must be an object');Ir(this.dd,2,c,d);a=Kr(this,this.D().clone().G(a+\"/bbox\").K(b));return this.F(a,c,d)};Hr.prototype.getFeaturesByBoundingBox=Hr.prototype.dd;Hr.prototype.sa=function(a){var b=this.i[a];if(b)return b;this.f[a]||this.Le(a);return null};\nHr.prototype.kf=function(a,b,c,d,e){wc(a,\"String\",this.kf,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.kf,1,'\"geojsonObject\" must be an object');Ir(this.kf,2,c,d);if(e&&!Da(e))throw new D(this.kf,4,'\"opt_params\" must be an object');return Lr(this,a,c,d,\"PUT\",b,e)};Hr.prototype.putFeatures=Hr.prototype.kf;\nHr.prototype.gf=function(a,b,c,d,e){wc(a,\"String\",this.gf,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.gf,1,'\"featureCollection\" must be an object');Ir(this.gf,2,c,d);if(e&&!Da(e))throw new D(this.gf,4,'\"opt_params\" must be an object');return Lr(this,a,c,d,\"POST\",b,e)};Hr.prototype.postFeatures=Hr.prototype.gf;\nHr.prototype.Sf=function(a,b,c,d){wc(a,\"String\",this.Sf,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.Sf,1,'\"params\" must be an object');Ir(this.Sf,2,c,d);return Lr(this,a,c,d,\"DELETE\",B,b)};Hr.prototype.deleteFeatures=Hr.prototype.Sf;\nfunction Lr(a,b,c,d,e,f,g){var h=Object.assign(a.g?{}:{authorization:\"Bearer \"+a.j},{\"Content-Type\":\"application/geo+json\"},a.bf);e={method:e,headers:h};f&&(e.data=JSON.stringify(f));b=Jr(a.D().clone().G(b+\"/features\").K(g||{}));f=new rf(\"application/json\",b.toString(),fe,e);f.then(c,qp(a,b,d));return f}Hr.prototype.Le=function(a){var b=this;this.f[a]=Mr;this.fg(a,function(c){b.f[a]=Nr;b.i[a]=c.copyright;b.dispatchEvent(\"copyrightupdate\")},function(c){b.f[a]=Or;throw c;})};\nfunction Kr(a,b){return a.g?b:Jr(b).K({access_token:a.j})}function Jr(a){var b=Object.assign({},a.getQuery());delete b.apikey;return a.Oi(b)}Hr.CONFIG_KEY=\"xyz\";var Mr=1,Nr=2,Or=-1;function Ir(a,b,c,d){if(!Ca(c))throw new D(a,b,'\"onResult\" must be a function');if(!Ca(d))throw new D(a,b+1,'\"onError\" must be a function');}Y.prototype.Gn=function(a){return this.Ya(Hr,a)};Y.prototype.getXYZService=Y.prototype.Gn;function Pr(a,b,c){var d;Pr.l.constructor.call(this,c?{min:c.min,max:c.max}:void 0);C(a,Hr,Pr,0);if(!zc(b))throw new D(Pr,1,'\"spaceId\" must be a string');this.s=a;this.c=b;this.a={};if(c&&([\"limit\",\"simplificationLevel\",\"tags\"].forEach(function(e){e in c&&(this.a[e]=c[e])},this),a=c.parameters))for(d in a)this.a[d]=a[d];this.Sc(new Sh({sources:{xyz:{type:\"MVT\"}},layers:{xyz:{data:{source:\"xyz\",layer:this.c},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,order:200,color:\"#92CF48\",size:[[10,\n\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#000000\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}))}u(Pr,R);t(\"H.service.xyz.Provider\",Pr);Pr.prototype.F=function(a,b,c,d,e){return this.s.ag(a,b,c,this.c,d,e,this.a)};Pr.prototype.requestInternal=Pr.prototype.F;Pr.prototype.sa=function(){return this.s.sa(this.c)};\nPr.prototype.getCopyrights=Pr.prototype.sa;Pr.prototype.ta=function(){return this.ub()};Pr.prototype.getStyle=Pr.prototype.ta;Pr.prototype.rc=function(a){a.b(\"MVT\");this.Sc(a)};Pr.prototype.setStyle=Pr.prototype.rc;t(\"H.service.buildInfo\",function(){return Ef(\"H-service\",\"1.23.0\",\"165e5dd\")});\n");